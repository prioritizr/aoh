<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create Area of Habitat data — create_spp_aoh_data • aoh</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create Area of Habitat data — create_spp_aoh_data" />
<meta property="og:description" content="Create Area of Habitat (AOH) data for species based on their altitudinal and
habitat preferences (Brooks et al. 2019)." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aoh</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.99999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/aoh.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/aoh/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create Area of Habitat data</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/aoh/blob/master/R/create_spp_aoh_data.R'><code>R/create_spp_aoh_data.R</code></a></small>
    <div class="hidden name"><code>create_spp_aoh_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create Area of Habitat (AOH) data for species based on their altitudinal and
habitat preferences (Brooks <em>et al.</em> 2019).</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>create_spp_aoh_data</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>output_dir</span>,
  spp_summary_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  spp_habitat_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  elevation_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  habitat_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  template_data <span class='op'>=</span> <span class='fu'><a href='get_world_behrmann_1km_rast.html'>get_world_behrmann_1km_rast</a></span><span class='op'>(</span><span class='op'>)</span>,
  cache_dir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>,
  iucn_version <span class='op'>=</span> <span class='st'>"latest"</span>,
  habitat_version <span class='op'>=</span> <span class='st'>"latest"</span>,
  key <span class='op'>=</span> <span class='cn'>NULL</span>,
  force <span class='op'>=</span> <span class='cn'>FALSE</span>,
  n_threads <span class='op'>=</span> <span class='fl'>1</span>,
  use_gdal <span class='op'>=</span> <span class='fu'><a href='is_gdal_available.html'>is_gdal_available</a></span><span class='op'>(</span><span class='op'>)</span>,
  omit_habitat_codes <span class='op'>=</span> <span class='fu'><a href='default_omit_iucn_habitat_codes.html'>default_omit_iucn_habitat_codes</a></span><span class='op'>(</span><span class='op'>)</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::sf()</a></code> Spatial data delineating species geographic ranges
obtained from the <a href='https://www.iucnredlist.org/'>IUCN Red List</a>.
See below for details.</p></td>
    </tr>
    <tr>
      <th>output_dir</th>
      <td><p><code>character</code> folder path to save raster files
(GeoTIFF format) containing the Area of Habitat data.</p></td>
    </tr>
    <tr>
      <th>spp_summary_data</th>
      <td><p><code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble::tibble()</a></code> Table containing summary
information for each species (in the argument to <code>x</code>).
Specifically, the argument should contain the following columns: <code>"id_no"</code>,
<code>"elevation_lower"</code>, and <code>"elevation_upper"</code> columns.
Here, <code>"id_no"</code> corresponds to the species' taxon identifier
(also present in <code>x</code>), and the <code>"elevation_lower"</code> and <code>"elevation_upper"</code>
columns indicate the lowest and highest elevations that contain habitat
for the species.
Defaults to <code>NULL</code> such that data are automatically obtained from the
latest version of the <a href='https://www.iucnredlist.org'>IUCN Red List</a>.</p></td>
    </tr>
    <tr>
      <th>spp_habitat_data</th>
      <td><p><code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble::tibble()</a></code> Table containing habitat
preference information for each species (in the argument to <code>x</code>).
Specifically, the argument should contain the following columns: <code>"id_no"</code>,
<code>"code"</code>, <code>"suitability"</code>, <code>"season"</code> columns.
Here, <code>"id_no"</code> corresponds to the species' taxon identifier
(also present in <code>x</code>), <code>"code"</code> indicates a habitat classification code
that is suitable for the species (i.e. based on layer names in the
argument to habitat_data), <code>"suitability"</code> indicates the level suitability
of the habitat class for a given species (e.g. using values such
as <code>"Suitable"</code> or <code>"Marginal"</code>), and <code>"season"</code> indicates
if the habitat class is only suitable for a particular seasonal
distribution (e.g. <code>"Breeding"</code>).
Defaults to <code>NULL</code> such that data are automatically obtained from the
latest version of the <a href='https://www.iucnredlist.org'>IUCN Red List</a>.</p></td>
    </tr>
    <tr>
      <th>elevation_data</th>
      <td><p><code><a href='https://rdrr.io/pkg/terra/man/rast.html'>terra::rast()</a></code> Raster data delineating the
worldwide elevation data (e.g. Amatulli <em>et al.</em> 2018).
Defaults to <code>NULL</code> such that data
are automatically obtained (using <code><a href='get_global_elevation_data.html'>get_global_elevation_data()</a></code>).
If the data are obtained automatically, then a preprocessed version
of the habitat data will be used to reduce processing time.</p></td>
    </tr>
    <tr>
      <th>habitat_data</th>
      <td><p><code><a href='https://rdrr.io/pkg/terra/man/rast.html'>terra::rast()</a></code> Multi-layer raster data delineating the
coverage of different habitat classes across world
(e.g. Jung <em>et al.</em> 2020a,b).
Each layer should correspond to a different habitat class,
and the name of each layer should contain a unique code used to identify
which places contain suitable habitat for a given species
(per the <code>"code"</code> column in the the argument to <code>spp_habitat_data</code>).
For each layer, pixel values should indicate the percentage of available
an available habitat class.
<strong>Critically, a value of 1000 should indicate 100%, and a value of 0
should indicate 0%.</strong>
Defaults to <code>NULL</code> such that data
are automatically obtained (using <code><a href='get_global_habitat_data.html'>get_global_habitat_data()</a></code>).
If the data are obtained automatically, then a preprocessed version
of the habitat data will be used to reduce processing time.</p></td>
    </tr>
    <tr>
      <th>template_data</th>
      <td><p><code><a href='https://rdrr.io/pkg/terra/man/rast.html'>terra::rast()</a></code> Template raster specifying the
resolution, coordinate reference system, and dimensionality for the
output raster files.
Defaults to <code><a href='get_world_behrmann_1km_rast.html'>get_world_behrmann_1km_rast()</a></code> which is a global 1 km
resolution raster under the World Behrmann coordinate reference system
(ESRI:54017).</p></td>
    </tr>
    <tr>
      <th>cache_dir</th>
      <td><p><code>character</code> folder path for downloading and caching data.
By default, a temporary directory is used (i.e. <code><a href='https://rdrr.io/r/base/tempfile.html'>tempdir()</a></code>).
<strong>To avoid downloading the same data multiple times, it is strongly
recommended to specify a persistent storage location (see Examples below).</strong></p></td>
    </tr>
    <tr>
      <th>iucn_version</th>
      <td><p><code>character</code> Version of the
IUCN Red List dataset that should be used. See documentation for the
the <code>version</code> parameter in the <code><a href='get_spp_summary_data.html'>get_spp_summary_data()</a></code> function
for further details.
Defaults to <code>"latest"</code> such that the most recent version of the dataset is
used.</p></td>
    </tr>
    <tr>
      <th>habitat_version</th>
      <td><p><code>character</code> Version of the
habitat dataset that should be used. See documentation for the
the <code>version</code> parameter in the <code><a href='get_global_habitat_data.html'>get_global_habitat_data()</a></code> function
for further details.
This parameter is only used if habitat data are obtained
automatically (i.e. the argument to <code>habitat_data</code> is <code>NULL</code>).
Defaults to <code>"latest"</code> such that the most recent version of the dataset is
used if data need to be obtained.</p></td>
    </tr>
    <tr>
      <th>key</th>
      <td><p><code>character</code> Token for querying the IUCN Red List API.
Defaults to <code>NULL</code> such that the token
accessed from  the <code>"IUCN_REDLIST_KEY"</code> environmental variable
(which can be specified in the .Renviron file).</p></td>
    </tr>
    <tr>
      <th>force</th>
      <td><p><code>logical</code> should the data be downloaded even if the
the data are already available?
Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>n_threads</th>
      <td><p><code>integer</code> Number of computational threads to use
for data processing.
To reduce run time, it is strongly recommended to set this
parameter based on available resources (see Examples section below).
Note that parallel processing is only used for processing the
habitat classification and elevation data.
As such, this parameter will have no influence when using preprocessed
datasets.
Defaults to 1.</p></td>
    </tr>
    <tr>
      <th>use_gdal</th>
      <td><p><code>logical</code> indicating if GDAL should be used for
projecting and cropping raster data?
If GDAL is installed on the system and the <span class="pkg">gdalUtils</span> package
is installed, this can dramatically reduce run time.
Defaults to <code>TRUE</code> if GDAL is available (per <code><a href='is_gdal_available.html'>is_gdal_available()</a></code>).</p></td>
    </tr>
    <tr>
      <th>omit_habitat_codes</th>
      <td><p><code>character</code> Habitat classification codes
to omit from resulting Area of Habitat data. If the aim is to identify
places that contain natural, suitable habitats, then processing should
exclude (i) anthropogenically modified habitat classifications and (ii)
unknown habitat classification types. Defaults to all artificial,
introduced vegetation, and unknown habitat classifications on
the <a href='https://www.iucnredlist.org/resources/habitat-classification-scheme'>IUCN Red List Habitat Classification Scheme</a>
(see <code><a href='default_omit_iucn_habitat_codes.html'>default_omit_iucn_habitat_codes()</a></code>,</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> Should progress be displayed while processing data?
Defaults to <code>TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::st_sf()</a></code> object containing range maps for the species distributions
used to generate the Area of Habitat data and additional columns describing
the Area of Habitat data.
These range maps were produced by cleaning those supplied as an argument
to <code>x</code> so they can be used to generate the Area of Habitat data
(see <code><a href='clean_spp_range_data.html'>clean_spp_range_data()</a></code> for data cleaning procedures).
Specifically, the object contains the following columns:</p><dl>
<dt>id_no</dt><dd><p><code>numeric</code> species' taxon identifier on the IUCN Red List.</p></dd>
<dt>binomial</dt><dd><p><code>character</code> species name.</p></dd>
<dt>seasonal</dt><dd><p><code>numeric</code> seasonal distribution code.</p></dd>
<dt>full_habitat_code</dt><dd><p><code>character</code> all habitat classification
codes that contain suitable habitat for the species.
If a given species has multiple suitable habitat classes,
then these are denoted using a pipe-delimited format.
For example, if the habitat classes denoted with the codes
<code>"1.5"</code> and <code>"1.9"</code> were considered suitable for a given species, then
these codes would be indicated as <code>"1.5|1.9"</code>.</p></dd>
<dt>habitat_code</dt><dd><p><code>character</code> habitat
codes used to create the species' Area of Habitat data.
Since the argument to <code>habitat_data</code> may not contain habitat
classes for all suitable habitats for a given species
(e.g. the default dataset does not contain subterranean cave systems),
this column contains the subset of the habitat codes listed in the
<code>"full_habitat_code"</code>column that were used for processing.</p></dd>
<dt>elevation_lower</dt><dd><p><code>numeric</code> lower elevation threshold used to create
the species' Area of Habitat data.</p></dd>
<dt>elevation_upper</dt><dd><p><code>numeric</code> upper elevation threshold used to create
the species' Area of Habitat data.</p></dd>
<dt>xmin</dt><dd><p><code>numeric</code> value describing the spatial extent of
the Area of Habitat data.</p></dd>
<dt>xmax</dt><dd><p><code>numeric</code> value describing the spatial extent of
the Area of Habitat data.</p></dd>
<dt>ymin</dt><dd><p><code>numeric</code> value describing the spatial extent of
the Area of Habitat data.</p></dd>
<dt>ymax</dt><dd><p><code>numeric</code> value describing the spatial extent of
the Area of Habitat data.</p></dd>
<dt>path</dt><dd><p><code>character</code> file paths for Area of Habitat data
(in GeoTIFF format).
The Area of Habitat datasets denote the proportion of land
inside different grid cells that contain suitable habitat for
species' seasonal distribution.
Thus a grid cell with a value of 0 has 0% of its spatial extent covered by
suitable habitat, a value of 1 has 100% of its spatial extent covered by
suitable habitat, and a missing (<code>NA</code>) value
means that the cell is located outside of the species seasonal
distribution (per the geographic range data).
File paths that are denoted with missing (<code>NA</code>) values correspond to
species distributions that were not processed (e.g. due to lack of habitat
data).</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The Area of Habitat data are produced by
(i) cleaning the range data to prepare them for subsequent analysis
(see <code><a href='clean_spp_range_data.html'>clean_spp_range_data()</a></code> for details);
(ii) automatically downloading global elevation and habitat classification
data (if needed);
(iii) automatically downloading information on the
altitudinal limits and habitat preferences of the species from the IUCN Red
List (per the taxon identifiers in the <code>id_no</code> column) (if needed);
and (iv) cross-referencing this information to identify suitable habitat
located within the altitudinal limits and geographic range of each species
(following Brooks <em>et al.</em> 2019).
To account for migratory species, the spatial distribution of species'
seasonal distributions (e.g. breeding, non-breeding, and passage
distributions) are processed separately.
Thus a separate Area of Habitat dataset is produced for each seasonal
distribution of each species.
Please note that these procedures are designed for terrestrial species
and will not apply to marine species.</p>
    <h2 class="hasAnchor" id="species-range-data-format"><a class="anchor" href="#species-range-data-format"></a>Species range data format</h2>

    

<p>Species range data are expected to follow the data format conventions
for the IUCN Red List (see <a href='https://www.iucnredlist.org/resources/mappingstandards'>IUCN Red List documentation</a> for
details). Specifically, the argument to <code>x</code> must an
<code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::st_sf()</a></code> object with the following columns: <code>id_no</code>, <code>presence</code>,
<code>origin</code>, <code>seasonal</code>, <code>terrestrial</code> (or <code>terrestial</code>), <code>freshwater</code> and
<code>marine</code>. Below we provide a brief description of each column:</p>
<dl>

<dt><code>id_no</code></dt><dd><p><code>numeric</code> taxon identifier on the IUCN Red List.</p></dd>

<dt><code>presence</code></dt><dd><p><code>numeric</code> identifier describing information about
the presence of the taxon in the range data.</p></dd>

<dt><code>origin</code></dt><dd><p><code>numeric</code>  identifier describing if the species is native
to the location(s) described by the range data.</p></dd>

<dt><code>seasonality</code></dt><dd><p><code>numeric</code> identifier describing if the species
is occupied by the location(s) describe by the range data throughout
the whole year, of if only during certain seasons.</p></dd>

<dt><code>terrestial</code></dt><dd><p><code>character</code> value indicating if the range
data pertain to terrestrial environments (with <code>"true"</code> or <code>"false"</code>
values.)</p></dd>

<dt><code>freshwater</code></dt><dd><p><code>character</code> value indicating if the range
data pertain to freshwater environments (with <code>"true"</code> or <code>"false"</code>
values.)</p></dd>

<dt><code>marine</code></dt><dd><p><code>character</code> value indicating if the range
data pertain to marine environments (with <code>"true"</code> or <code>"false"</code>
values.)</p></dd>


</dl>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Amatulli G, Domisch S, Tuanmu M-N, Parmentier B, Ranipeta A, Malczyk J, and
Jetz W (2018) A suite of global, cross-scale topographic variables for
environmental and biodiversity modeling. <em>Scientific Data</em>, 5:180040.
Available at <a href='https://doi.org/10.1038/sdata.2018.40'>https://doi.org/10.1038/sdata.2018.40</a>.</p>
<p>Brooks TM, Pimm SL, Akçakaya HR, Buchanan GM, Butchart SHM, Foden W,
Hilton-Taylor C, Hoffmann M, Jenkins CN, Joppa L, Li BV, Menon V,
Ocampo-Peñuela N, Rondinini C (2019) Measuring terrestrial Area of Habitat
(AOH) and its Utility for the IUCN Red List. <em>Trends in Ecology &amp; Evolution</em>,
34:977--986. Available at <a href='https://doi.org/10.1016/j.tree.2019.06.009'>https://doi.org/10.1016/j.tree.2019.06.009</a>.</p>
<p>Jung M, Dahal PR, Butchart SHM, Donald PF, De Lamo X, Lesiv M, Kapos V,
Rondinini C, and Visconti P (2020a) A global map of
terrestrial habitat types. <em>Scientific Data</em>, 7:1--8.
Available at <a href='https://doi.org/10.1038/s41597-020-00599-8'>https://doi.org/10.1038/s41597-020-00599-8</a>.</p>
<p>Jung M, Dahal PR, Butchart SHM, Donald PF, De Lamo X, Lesiv M, Kapos V,
Rondinini C, and Visconti P (2020b) A global map of
terrestrial habitat types (insert version) [Data set].
<em>Zenodo Digital Repository</em>.
Available at <a href='https://doi.org/10.5281/zenodo.4058819'>https://doi.org/10.5281/zenodo.4058819</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='co'># \dontrun{</span></span>
<span class='r-in'><span class='co'># find file path for example range data following IUCN Red List data format</span></span>
<span class='r-in'><span class='co'>## N.B. the range data were not obtained from the IUCN Red List,</span></span>
<span class='r-in'><span class='co'>## and were instead based on data from GBIF (https://www.gbif.org/)</span></span>
<span class='r-in'><span class='va'>path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"EXAMPLE_SPECIES.zip"</span>, package <span class='op'>=</span> <span class='st'>"aoh"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># import data</span></span>
<span class='r-in'><span class='va'>spp_range_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='read_spp_range_data.html'>read_spp_range_data</a></span><span class='op'>(</span><span class='va'>path</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># specify settings for data processing</span></span>
<span class='r-in'><span class='va'>output_dir</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>                       <span class='co'># folder to save AOH data</span></span>
<span class='r-in'><span class='va'>cache_dir</span> <span class='op'>&lt;-</span> <span class='fu'>rappdirs</span><span class='fu'>::</span><span class='fu'><a href='https://rappdirs.r-lib.org/reference/user_data_dir.html'>user_data_dir</a></span><span class='op'>(</span><span class='st'>"aoh"</span><span class='op'>)</span>   <span class='co'># persistent storage location</span></span>
<span class='r-in'><span class='va'>n_threads</span> <span class='op'>&lt;-</span> <span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/detectCores.html'>detectCores</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span>      <span class='co'># speed up analysis</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># create cache directory if needed</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.exists</a></span><span class='op'>(</span><span class='va'>cache_dir</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>  <span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='va'>cache_dir</span>, showWarnings <span class='op'>=</span> <span class='cn'>FALSE</span>, recursive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># create Area of Habitat data for species</span></span>
<span class='r-in'><span class='va'>spp_aoh_data</span> <span class='op'>&lt;-</span> <span class='fu'>create_spp_aoh_data</span><span class='op'>(</span></span>
<span class='r-in'>  x <span class='op'>=</span> <span class='va'>spp_range_data</span>,</span>
<span class='r-in'>  output_dir <span class='op'>=</span> <span class='va'>output_dir</span>,</span>
<span class='r-in'>  n_threads <span class='op'>=</span> <span class='va'>n_threads</span>,</span>
<span class='r-in'>  cache_dir <span class='op'>=</span> <span class='va'>cache_dir</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> initializing</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loading required namespace: gdalUtils</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> initializing <span style='color: #B2B2B2;'>[821ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> importing global elevation data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> importing global elevation data <span style='color: #B2B2B2;'>[38ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> importing global habitat data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> importing global habitat data <span style='color: #B2B2B2;'>[15.1s]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> importing species summary data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> importing species summary data <span style='color: #B2B2B2;'>[1.2s]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> importing species habitat data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> importing species habitat data <span style='color: #B2B2B2;'>[328ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> cleaning species range data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> cleaning species range data <span style='color: #B2B2B2;'>[89ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> collating species data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>!</span> argument to "habitat_data" is missing layers for the following 2 habitat classification codes: "7.1", "7.2"</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> collating species data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> collating species data <span style='color: #B2B2B2;'>[80ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> preliminary geoprocessing</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> preliminary geoprocessing <span style='color: #B2B2B2;'>[162ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> preparing habitat data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> preparing habitat data <span style='color: #B2B2B2;'>[1m 23.3s]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> preparing elevation data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> preparing elevation data <span style='color: #B2B2B2;'>[17.2s]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> standardizing data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> standardizing data <span style='color: #B2B2B2;'>[1.1s]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> generating Area of Habitat data</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> generating Area of Habitat data <span style='color: #B2B2B2;'>[1.2s]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> post-processing results</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> post-processing results <span style='color: #B2B2B2;'>[13ms]</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> finished</span>
<span class='r-in'><span class='co'># }</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span> <span class='co'># interactive()</span></span>
<span class='r-in'><span class='co'># \dontrun{</span></span>
<span class='r-in'><span class='co'># preview data</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>result</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'># }</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'><span class='co'># \dontrun{</span></span>
<span class='r-in'><span class='co'># import AOH data as a list of terra::rast() objects</span></span>
<span class='r-in'><span class='va'>spp_aoh_rasters</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>spp_aoh_data</span><span class='op'>$</span><span class='va'>path</span>, <span class='fu'>terra</span><span class='fu'>::</span><span class='va'><a href='https://rdrr.io/pkg/terra/man/rast.html'>rast</a></span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># print AOH data list</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>spp_aoh_rasters</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[1]]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> class       : SpatRaster </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> dimensions  : 516, 537, 1  (nrow, ncol, nlyr)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> resolution  : 1000, 1000  (x, y)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> extent      : -915531, -378531, 4551769, 5067769  (xmin, xmax, ymin, ymax)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> coord. ref. : World_Behrmann </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> source      : AOH_4657_1.tif </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> name        : lyr.1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> min value   :     0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> max value   :     1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[2]]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> class       : SpatRaster </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> dimensions  : 499, 752, 1  (nrow, ncol, nlyr)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> resolution  : 1000, 1000  (x, y)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> extent      : -904531, -152531, 4568769, 5067769  (xmin, xmax, ymin, ymax)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> coord. ref. : World_Behrmann </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> source      : AOH_58622_1.tif </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> name        : lyr.1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> min value   :     0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> max value   :     1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[3]]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> class       : SpatRaster </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> dimensions  : 228, 568, 1  (nrow, ncol, nlyr)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> resolution  : 1000, 1000  (x, y)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> extent      : -248531, 319469, 4837769, 5065769  (xmin, xmax, ymin, ymax)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> coord. ref. : World_Behrmann </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> source      : AOH_59448_1.tif </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> name        : lyr.1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> min value   :     0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> max value   :     1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> [[4]]</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> class       : SpatRaster </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> dimensions  : 260, 371, 1  (nrow, ncol, nlyr)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> resolution  : 1000, 1000  (x, y)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> extent      : -468531, -97531, 4363769, 4623769  (xmin, xmax, ymin, ymax)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> coord. ref. : World_Behrmann </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> source      : AOH_979_1.tif </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> name        : lyr.1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> min value   :     0 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> max value   :     1 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># plot the data to visualize the range maps and AOH data</span></span>
<span class='r-in'><span class='fu'><a href='plot_spp_aoh_data.html'>plot_spp_aoh_data</a></span><span class='op'>(</span><span class='va'>spp_aoh_data</span><span class='op'>)</span></span>
<span class='r-plt'><img src='create_spp_aoh_data-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span class='co'># }</span></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="http://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


