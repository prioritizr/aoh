<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create fractional coverage data to describe species' Area of Habitat (AOH)
across large spatial scales. Briefly, this function
creates Area of Habitat data for each seasonal distribution of each species,
overlays the Area of Habitat data with a spatial grid, computes
the proportion of suitable habitat available within each grid cell
(for each species separately), and stores the results as raster files
on disk. To reduce data storage requirements,
Area of Habitat data are automatically deleted during processing.
Please note that these procedures are designed for terrestrial species,
and will not apply to marine or freshwater species."><title>Create fractional coverage data — create_spp_frc_data • aoh</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create fractional coverage data — create_spp_frc_data"><meta property="og:description" content="Create fractional coverage data to describe species' Area of Habitat (AOH)
across large spatial scales. Briefly, this function
creates Area of Habitat data for each seasonal distribution of each species,
overlays the Area of Habitat data with a spatial grid, computes
the proportion of suitable habitat available within each grid cell
(for each species separately), and stores the results as raster files
on disk. To reduce data storage requirements,
Area of Habitat data are automatically deleted during processing.
Please note that these procedures are designed for terrestrial species,
and will not apply to marine or freshwater species."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">aoh</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.15</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/aoh.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/customization.html">Customization</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/prioritizr/aoh/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create fractional coverage data</h1>
      <small class="dont-index">Source: <a href="https://github.com/prioritizr/aoh/blob/HEAD/R/create_spp_frc_data.R" class="external-link"><code>R/create_spp_frc_data.R</code></a></small>
      <div class="d-none name"><code>create_spp_frc_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create fractional coverage data to describe species' Area of Habitat (AOH)
across large spatial scales. Briefly, this function
creates Area of Habitat data for each seasonal distribution of each species,
overlays the Area of Habitat data with a spatial grid, computes
the proportion of suitable habitat available within each grid cell
(for each species separately), and stores the results as raster files
on disk. To reduce data storage requirements,
Area of Habitat data are automatically deleted during processing.
Please note that these procedures are designed for terrestrial species,
and will not apply to marine or freshwater species.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_spp_frc_data</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">output_dir</span>,</span>
<span>  <span class="va">res</span>,</span>
<span>  elevation_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  habitat_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crosswalk_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  habitat_version <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  elevation_version <span class="op">=</span> <span class="st">"latest"</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_threads <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cache_limit <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  engine <span class="op">=</span> <span class="st">"terra"</span>,</span>
<span>  rasterize_touches <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p><code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> Spatial data delineating species' geographic ranges,
habitat preferences, and elevational limits. This object should
be created using the <code><a href="create_spp_info_data.html">create_spp_info_data()</a></code> function.</p></dd>


<dt>output_dir</dt>
<dd><p><code>character</code> Folder path to save raster (GeoTIFF) files
containing the fractional coverage data.</p></dd>


<dt>res</dt>
<dd><p><code>numeric</code> Resolution for computing fractional coverage.
Note that the argument to <code>res</code> must be a factor of the
the resolution of the underlying Area of Habitat data.
For example, a value of 5000 would be a valid argument
if the underlying data had a resolution of 100 m.</p></dd>


<dt>elevation_data</dt>
<dd><p><code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> Raster data delineating the
worldwide elevation data (e.g., Robinson <em>et al.</em> 2014).
Defaults to <code>NULL</code> such that data
are automatically obtained (using <code><a href="get_global_elevation_data.html">get_global_elevation_data()</a></code>).
If the data are obtained automatically, then a preprocessed version
of the habitat data will be used to reduce processing time.</p></dd>


<dt>habitat_data</dt>
<dd><p><code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> Raster data indicating the
presence of different habitat classes across world
(e.g., Jung <em>et al.</em> 2020a,b; Lumbierres <em>et al.</em> 2021).
Each grid cell should contain an <code>integer</code> value that specifies which
habitat class is present within the cell
(based on the argument to <code>crosswalk_data</code>).
Defaults to <code>NULL</code> such that data are automatically obtained (using
<code><a href="get_lumb_cgls_habitat_data.html">get_lumb_cgls_habitat_data()</a></code>).</p></dd>


<dt>crosswalk_data</dt>
<dd><p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code> Table containing data that indicate
which grid cell values in the argument to <code>habitat_data</code> correspond to
which IUCN habitat classification codes. The argument should contain
a <code>code</code> column that specifies a set of IUCN habitat classification
codes (see <code><a href="iucn_habitat_data.html">iucn_habitat_data()</a></code>, and a <code>value</code> column that specifies
different values in the argument to <code>habitat_data</code>.
Defaults to <code>NULL</code> such that the crosswalk for the default habitat
data are used (i.e., <code><a href="crosswalk_lumb_cgls_data.html">crosswalk_lumb_cgls_data()</a></code>).</p></dd>


<dt>cache_dir</dt>
<dd><p><code>character</code> Folder path for downloading and caching data.
By default, a temporary directory is used (i.e., <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>).
<strong>To avoid downloading the same data multiple times, it is strongly
recommended to specify a persistent storage location (see Examples below).</strong></p></dd>


<dt>habitat_version</dt>
<dd><p><code>character</code> Version of the
habitat dataset that should be used. See documentation for the
the <code>version</code> parameter in the <code><a href="get_lumb_cgls_habitat_data.html">get_lumb_cgls_habitat_data()</a></code> function
for further details.
This parameter is only used if habitat data are obtained
automatically (i.e., the argument to <code>habitat_data</code> is <code>NULL</code>).
Defaults to <code>"latest"</code> such that the most recent version of the dataset is
used if data need to be obtained.</p></dd>


<dt>elevation_version</dt>
<dd><p><code>character</code> Version of the
elevation dataset that should be used. See documentation for the
the <code>version</code> parameter in the <code><a href="get_global_elevation_data.html">get_global_elevation_data()</a></code> function
for further details.
This parameter is only used if elevation data are obtained
automatically (i.e., the argument to <code>elevation_data</code> is <code>NULL</code>).
Defaults to <code>"latest"</code> such that the most recent version of the dataset is
used if data need to be obtained.</p></dd>


<dt>force</dt>
<dd><p><code>logical</code> Should the data be downloaded even if the
the data are already available?
Defaults to <code>FALSE</code>.</p></dd>


<dt>n_threads</dt>
<dd><p><code>integer</code> Number of computational threads to use
for data processing.
To reduce run time, it is strongly recommended to set this
parameter based on available resources (see Examples section below).
Note that parallel processing is only used for processing the
habitat classification and elevation data.
As such, this parameter will have no influence when using preprocessed
datasets.
Defaults to 1.</p></dd>


<dt>cache_limit</dt>
<dd><p><code>integer</code> Amount of memory (Mb) for caching
when processing spatial data with the
Geospatial Data Abstraction Library (GDAL).
This parameter is only used when using the <code>"gdal"</code> engine.
If possible, it is recommended to set this as parameter to
at 5000 (assuming there is at least 8Gb memory available
on the system).
Defaults to 1000.</p></dd>


<dt>engine</dt>
<dd><p><code>character</code> Value indicating the name of the software
to use for data processing.
Available options include <code>"terra"</code>, <code>"gdal"</code>, or <code>"grass"</code>
(see below for details).
Defaults to <code>"terra"</code>.</p></dd>


<dt>rasterize_touches</dt>
<dd><p><code>logical</code> How should <code>x</code> (the species' range data)
be rasterized when overlapped with the elevation and habitat raster data?
If <code>rasterize_touches = FALSE</code>, the species' range data are treated as
overlapping with a raster cell, if the range data overlap with the
centroid of the raster cell.
If <code>rasterize_touches = TRUE</code>, then the species' range data are treated as
overlapping with a raster cell, if the range data overlap with any
part of the raster cell.
Since some species' ranges might be too small to overlap
with the centroid of any raster cells (meaning that the output
Area of Habitat map does not contain any suitable habitat for the species),
it may be preferable to use <code>rasterize_touches = TRUE</code>.
Note that <code>rasterize_touches = TRUE</code> is not compatible with the GRASS
engine.
Defaults to <code>FALSE</code> (following Lumbierres <em>et al.</em> 2022).</p></dd>


<dt>verbose</dt>
<dd><p><code>logical</code> Should progress be displayed while processing data?
Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::st_sf()</a></code> object. This object is an updated version
of the argument to <code>x</code>, and contains additional columns describing the
output raster files. Specifically, it contains the following columns:</p><dl><dt>id_no</dt>
<dd><p><code>numeric</code> species' taxon identifier on the IUCN Red List.</p></dd>

<dt>binomial</dt>
<dd><p><code>character</code> species name.</p></dd>

<dt>category</dt>
<dd><p><code>character</code> IUCN Red List threat category.</p></dd>

<dt>migratory</dt>
<dd><p><code>logical</code> indicating if the species was processed
as a migratory species (i.e., it had a <em>breeding</em>, <em>non-breeding</em>, or
<em>passage</em> seasonal distribution).</p></dd>

<dt>seasonal</dt>
<dd><p><code>numeric</code> seasonal distribution code.</p></dd>

<dt>full_habitat_code</dt>
<dd><p><code>character</code> all habitat classification
codes that contain suitable habitat for the species.
If a given species has multiple suitable habitat classes,
then these are denoted using a pipe-delimited format.
For example, if the habitat classes denoted with the codes
<code>"1.5"</code> and <code>"1.9"</code> were considered suitable for a given species, then
these codes would be indicated as <code>"1.5|1.9"</code>.</p></dd>

<dt>habitat_code</dt>
<dd><p><code>character</code> habitat
codes used to create the species' Area of Habitat data.
Since the argument to <code>habitat_data</code> may not contain habitat
classes for all suitable habitats for a given species
(e.g., the default dataset does not contain subterranean cave systems),
this column contains the subset of the habitat codes listed in the
<code>"full_habitat_code"</code> column that were used for processing.</p></dd>

<dt>elevation_lower</dt>
<dd><p><code>numeric</code> lower elevation threshold used to create
the species' Area of Habitat data.</p></dd>

<dt>elevation_upper</dt>
<dd><p><code>numeric</code> upper elevation threshold used to create
the species' Area of Habitat data.</p></dd>

<dt>elevation_upper</dt>
<dd><p><code>numeric</code> upper elevation threshold used to create
the species' Area of Habitat data.</p></dd>

<dt>xmin</dt>
<dd><p><code>numeric</code> value describing the spatial extent of
the output raster file.</p></dd>

<dt>xmax</dt>
<dd><p><code>numeric</code> value describing the spatial extent of
the output raster file.</p></dd>

<dt>ymin</dt>
<dd><p><code>numeric</code> value describing the spatial extent of
the output raster file.</p></dd>

<dt>ymax</dt>
<dd><p><code>numeric</code> value describing the spatial extent of
the output raster file.</p></dd>

<dt>path</dt>
<dd><p><code>character</code> file paths for the output raster files
(see Output file format section for details).</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="data-processing">Data processing<a class="anchor" aria-label="anchor" href="#data-processing"></a></h2>
    

<p>The fractional coverage data generated using the following procedures.
After these data are generated, they stored as files on disk
(see Output file format section for details).</p>
<ol><li><p>Global elevation and habitat classification are imported,   (if needed,,   see <code><a href="get_global_elevation_data.html">get_global_elevation_data()</a></code> and <code><a href="get_lumb_cgls_habitat_data.html">get_lumb_cgls_habitat_data()</a></code>,   for details).,   If these data are not available in the cache directory,   (i.e. argument to <code>cache_dir</code>), then they are automatically downloaded,   to the cache directory.,   Note that if elevation and habitat data are supplied,   (i.e. as arguments to <code>elevation_data</code> and <code>habitat_data</code>), then,   the user-supplied datasets are used to generate Area of Habitat data., ,</p></li>
<li><p>The Area of Habitat data are then generated for each seasonal,   distribution of each species. For a given species' distribution,,   the data are generated by,   (i) cropping the habitat classification and elevation data to the spatial,   extent  of the species' seasonal distribution;,   (ii) converting the habitat classification data to a binary layer,   denoting suitable habitat for the species' distribution,    (using the habitat affiliation data for the species' distribution);,   (iii) creating a mask based on the species' elevational limits,   and the elevation data, and then using the mask to set values,   in the binary layer to zero if they are outside of the species',   limits;,   (iv) creating a mask by rasterizing the species' seasonal,   distribution, and then using the mask to set values in the binary,   layer to missing (<code>NA</code>) values if they are outside the species',   distribution;,   (v) saving the binary layer as the Area of Habitat data,   for the species' distribution.,   Note that species' distributions that already have Area of Habitat data,   available in the output directory are skipped,   (unless the argument to <code>force</code> is <code>TRUE</code>).</p></li>
<li><p>A <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code> object is created to define
a standardized grid for calculating fractional coverage data.
Specifically, the grid is created by aggregating the
habitat data (per argument to <code>habitat_data</code>) to the specified
resolution (per argument to <code>res</code>).</p></li>
<li><p>The Area of Habitat data are used to compute fractional
coverage data. Specifically, for each seasonal distribution
of each species, the Area of Habitat data are overlaid with the standardized
grid to calculate the proportion of each grid cell that contains
suitable habitat.</p></li>
<li><p>Post-processing routines are used to prepare the results.
These routines involve updating the collated species data to include
file names and spatial metadata for the fractional coverage data.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="output-file-format">Output file format<a class="anchor" aria-label="anchor" href="#output-file-format"></a></h2>
    

<p>Fractional coverage data are stored in a separate raster (GeoTIFF) file for
each seasonal distribution of each species. Each raster file is assigned a
file name based on a prefix and a combination of the species' taxon
identifier
(per <code>id_no</code>/<code>SISID</code> column in <code>x</code>) and the identifier for the seasonal
distribution (per <code>seasonality</code> in <code>x</code>)
(i.e., file names are named according to <code>FRC_{$id_no}_${seasonality}.tif</code>).
For a given raster file, grid cell values denote the proportion of suitable
habitat located within each cell.
For example, a value of 0 corresponds to 0% fractional coverage,
0.5 to 50% fractional coverage, 1 to 100% fractional coverage.
Missing (<code>NA</code>) values correspond to
grid cells that are located entirely outside of the species' distribution.</p>
    </div>
    <div class="section level2">
    <h2 id="engines">Engines<a class="anchor" aria-label="anchor" href="#engines"></a></h2>
    

<p>This function can use different software engines for data processing
(specified via argument to <code>engine</code>). Although each engine produces the
same results, some engines are more computationally efficient than others.
The default <code>"terra"</code> engine uses the <span class="pkg">terra</span> package for processing.
Although this engine is easy to install and fast for small datasets, it does
not scale well for larger datasets. It is generally recommended to use
the <code>"gdal"</code> engine to perform data processing with the
<a href="https://gdal.org/" class="external-link">Geospatial Data Abstraction Library (GDAL)</a>
can be used for data processing. The <code>"grass"</code> engine can also be
used to perform data processing with the
<a href="https://grass.osgeo.org/" class="external-link">Geographic Resources Analysis Support System (GRASS)</a>.
Note that the <code>"grass"</code> engine requires both the GDAL and GRASS software
to be installed.
For instructions on installing dependencies for these engines,
please see the README file.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Brooks TM, Pimm SL, Akçakaya HR, Buchanan GM, Butchart SHM, Foden W,
Hilton-Taylor C, Hoffmann M, Jenkins CN, Joppa L, Li BV, Menon V,
Ocampo-Peñuela N, Rondinini C (2019) Measuring terrestrial Area of Habitat
(AOH) and its utility for the IUCN Red List. <em>Trends in Ecology &amp; Evolution</em>,
34, 977--986. <a href="https://doi.org/10.1016/j.tree.2019.06.009" class="external-link">doi:10.1016/j.tree.2019.06.009</a></p>
<p>Jung M, Dahal PR, Butchart SHM, Donald PF, De Lamo X, Lesiv M, Kapos V,
Rondinini C, and Visconti P (2020a) A global map of
terrestrial habitat types. <em>Scientific Data</em>, 7, 1--8.
<a href="https://doi.org/10.1038/s41597-020-00599-8" class="external-link">doi:10.1038/s41597-020-00599-8</a></p>
<p>Jung M, Dahal PR, Butchart SHM, Donald PF, De Lamo X, Lesiv M, Kapos V,
Rondinini C, and Visconti P (2020b) A global map of
terrestrial habitat types (insert version) [Data set].
<em>Zenodo</em>.
<a href="https://doi.org/10.5281/zenodo.4058819" class="external-link">doi:10.5281/zenodo.4058819</a></p>
<p>Lumbierres M, Dahal PR, Di Marco M, Butchart SHM, Donald PF, and
Rondinini C (2021) Translating habitat class to land cover to map area of
habitat of terrestrial vertebrates. <em>Conservation Biology</em>, 36, e13851.
<a href="https://doi.org/10.1111/cobi.13851" class="external-link">doi:10.1111/cobi.13851</a></p>
<p>Lumbierres M, Dahal PR, Soria CD, Di Marco M, Butchart SHM, Donald PF, and
Rondinini C (2022) Area of Habitat maps for the world’s terrestrial birds
and mammals. <em>Scientific Data</em>, 9, 749.</p>
<p>Robinson N, Regetz J, and Guralnick RP (2014) EarthEnv-DEM90: A nearly-
global, void-free, multi-scale smoothed, 90m digital elevation model from
fused ASTER and SRTM data.
<em>ISPRS Journal of Photogrammetry and Remote Sensing</em>, 87, 57--67.
<a href="https://doi.org/10.1016/j.isprsjprs.2013.11.002" class="external-link">doi:10.1016/j.isprsjprs.2013.11.002</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>This function is useful for creating fractional coverage data when
species' Area of Habitat data are already not available.
If you have previously generated species' Area of Habitat data,
you can use the <code><a href="calc_spp_frc_data.html">calc_spp_frc_data()</a></code> to use these Area of Habitat data
to calculate the fractional coverage data directly.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># find file path for example range data following IUCN Red List data format</span></span></span>
<span class="r-in"><span><span class="co">## N.B., the range data were not obtained from the IUCN Red List,</span></span></span>
<span class="r-in"><span><span class="co">## and were instead based on data from GBIF (https://www.gbif.org/)</span></span></span>
<span class="r-in"><span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"EXAMPLE_SPECIES.zip"</span>, package <span class="op">=</span> <span class="st">"aoh"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># import data</span></span></span>
<span class="r-in"><span><span class="va">spp_range_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_spp_range_data.html">read_spp_range_data</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># specify settings for data processing</span></span></span>
<span class="r-in"><span><span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>                       <span class="co"># folder to save coverage data</span></span></span>
<span class="r-in"><span><span class="va">cache_dir</span> <span class="op">&lt;-</span> <span class="fu">rappdirs</span><span class="fu">::</span><span class="fu"><a href="https://rappdirs.r-lib.org/reference/user_data_dir.html" class="external-link">user_data_dir</a></span><span class="op">(</span><span class="st">"aoh"</span><span class="op">)</span>   <span class="co"># persistent storage location</span></span></span>
<span class="r-in"><span><span class="va">n_threads</span> <span class="op">&lt;-</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>      <span class="co"># speed up analysis</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create cache directory if needed</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">cache_dir</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">cache_dir</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create species' information data</span></span></span>
<span class="r-in"><span><span class="va">spp_info_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_spp_info_data.html">create_spp_info_data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">spp_range_data</span>,</span></span>
<span class="r-in"><span>  cache_dir <span class="op">=</span> <span class="va">cache_dir</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> initializing</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> initializing <span style="color: #B2B2B2;">[375ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> cleaning species range data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> cleaning species range data <span style="color: #B2B2B2;">[3.4s]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> importing species summary data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> importing species summary data <span style="color: #B2B2B2;">[336ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> importing species habitat data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> importing species habitat data <span style="color: #B2B2B2;">[422ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> collating species data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> collating species data <span style="color: #B2B2B2;">[240ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> post-processing results</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> post-processing results <span style="color: #B2B2B2;">[13ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> finished</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create fractional coverage data</span></span></span>
<span class="r-in"><span><span class="va">spp_frc_data</span> <span class="op">&lt;-</span> <span class="fu">create_spp_frc_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">spp_info_data</span>,</span></span>
<span class="r-in"><span>  res <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="va">output_dir</span>,</span></span>
<span class="r-in"><span>  n_threads <span class="op">=</span> <span class="va">n_threads</span>,</span></span>
<span class="r-in"><span>  cache_dir <span class="op">=</span> <span class="va">cache_dir</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> initializing</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> initializing <span style="color: #B2B2B2;">[6ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> importing global elevation data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> importing global elevation data <span style="color: #B2B2B2;">[11.8s]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> importing global habitat data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> argument to "crosswalk_data" is missing the following 2 habitat classification codes: "7.1", "7.2"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> importing global habitat data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> importing global habitat data <span style="color: #B2B2B2;">[9.1s]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> generating Area of Habitat data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     skipping 4 species distributions already processed</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> generating Area of Habitat data <span style="color: #B2B2B2;">[36ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> post-processing results</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> post-processing results <span style="color: #B2B2B2;">[35ms]</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> finished</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># preview data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">spp_frc_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># import fractional coverage data as a list of terra::rast() objects</span></span></span>
<span class="r-in"><span><span class="va">spp_frc_rasters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">spp_frc_data</span><span class="op">$</span><span class="va">path</span>, <span class="fu">terra</span><span class="fu">::</span><span class="va"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print list of rasters</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">spp_frc_rasters</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 53, 75, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 5000, 5000  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : -472531, -97531, 4362077, 4627077  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : World_Behrmann </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source      : FRC_979_1.tif </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        :  lyr.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   : 0.0000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   : 0.9968 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 46, 115, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 5000, 5000  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : -252531, 322469, 4837077, 5067077  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : World_Behrmann </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source      : FRC_59448_1.tif </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : lyr.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :     0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :     1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[3]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 104, 108, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 5000, 5000  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : -917531, -377531, 4547077, 5067077  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : World_Behrmann </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source      : FRC_4657_1.tif </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        :  lyr.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   : 0.0000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   : 0.9932 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[4]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> class       : SpatRaster </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dimensions  : 100, 151, 1  (nrow, ncol, nlyr)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> resolution  : 5000, 5000  (x, y)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> extent      : -907531, -152531, 4567077, 5067077  (xmin, xmax, ymin, ymax)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> coord. ref. : World_Behrmann </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> source      : FRC_58622_1.tif </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> name        : lyr.1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> min value   :     0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> max value   :     1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot the data to visualize the range maps and fractional coverage data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_spp_frc_data.html">plot_spp_frc_data</a></span><span class="op">(</span><span class="va">spp_frc_data</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="create_spp_frc_data-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

