<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clean species range data — clean_spp_range_data • aoh</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Clean species range data — clean_spp_range_data" />
<meta property="og:description" content="Clean species geographic range (i.e. extent of occurrence) data obtained
from the
International Union for Conservation of Nature (IUCN) Red List of Threatened Species.
Please note that this function should not be used to clean data
before using the data to create Area of Habitat data
(i.e. create_spp_aoh_data()). The procedures used the
create create Area of Habitat data will automatically clean the data
range data." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aoh</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.99999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/aoh/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clean species range data</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/aoh/blob/master/R/clean_spp_range_data.R'><code>R/clean_spp_range_data.R</code></a></small>
    <div class="hidden name"><code>clean_spp_range_data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Clean species geographic range (i.e. extent of occurrence) data obtained
from the
<a href='https://www.iucnredlist.org/'>International Union for Conservation of Nature (IUCN) Red List of Threatened Species</a>.
Please note that this function should <strong>not</strong> be used to clean data
before using the data to create Area of Habitat data
(i.e. <code><a href='create_spp_aoh_data.html'>create_spp_aoh_data()</a></code>). The procedures used the
create create Area of Habitat data will automatically clean the data
range data.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>clean_spp_range_data</span><span class='op'>(</span>
  <span class='va'>x</span>,
  crs <span class='op'>=</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_crs.html'>st_crs</a></span><span class='op'>(</span><span class='st'>"ESRI:54017"</span><span class='op'>)</span>,
  snap_tolerance <span class='op'>=</span> <span class='fl'>1</span>,
  geometry_precision <span class='op'>=</span> <span class='fl'>1500</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A <code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::sf()</a></code> object containing species geographic range data.</p></td>
    </tr>
    <tr>
      <th>crs</th>
      <td><p><code>character or </code>integer` object representing a coordinate
reference system. Defaults to World Behrmann (ESRI:54017).</p></td>
    </tr>
    <tr>
      <th>snap_tolerance</th>
      <td><p><code>numeric</code> tolerance for snapping geometry to a grid
for resolving invalid geometries. Defaults to 1 meter.</p></td>
    </tr>
    <tr>
      <th>geometry_precision</th>
      <td><p><code>numeric</code> level of precision for processing the
spatial data (used with <code><a href='https://r-spatial.github.io/sf/reference/st_precision.html'>sf::st_set_precision()</a></code>). The default is
1500 (higher values indicate higher precision). This level of precision is
generally suitable for analyses at the national-scale. For analyses at
finer-scale resolutions, consider using a greater value (e.g.
10000).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::sf()</a></code> object containing the dataset.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function applies the following data cleaning procedures:</p>
<ol>
<li><p>Column names are standardized. This involves converting them to lower
case characters and fixing any spelling mistakes.</p></li>
<li><p>Places where the species' presence is not "known or thought very likely
to occur currently" are excluded (i.e. filtering based on
<code>presence == 1</code>).</p></li>
<li><p>Places where the species' presence is not "native to the area"
are excluded (i.e. filtering based on <code>origin == 1</code>).</p></li>
<li><p>Places where the species' seasonal occurrence is uncertain are excluded
(i.e. filtering based on <code>seasonal != 5</code>).</p></li>
<li><p>Species that are not terrestrial are excluded (i.e. filtering based on
where <code>terrestrial == "true"</code>).</p></li>
<li><p>Fix any potential geometry issues (using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Wrap geometries to date line (using <code><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>sf::st_wrap_dateline()</a></code>).</p></li>
<li><p>Fix any potential geometry issues (i.e. using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Reproject data to specified coordinate system
(i.e. using <code><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>sf::st_transform()</a></code>).</p></li>
<li><p>Fix any potential geometry issues (i.e. using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Snap geometries to spatial grid (using <code><a href='https://rdrr.io/pkg/lwgeom/man/st_snap_to_grid.html'>lwgeom::st_snap_to_grid()</a></code>).
Note that this step is only performed if the argument to <code>snap_tolerance</code>
is greater than zero.</p></li>
<li><p>Fix any potential geometry issues (using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
<li><p>Data are spatially dissolved so that each taxon is represented by
a separate geometry.</p></li>
<li><p>Fix any potential geometry issues (i.e. using <code><a href='https://r-spatial.github.io/sf/reference/valid.html'>sf::st_make_valid()</a></code>).</p></li>
</ol>

<p>For more information on criteria used in steps 2 -- 4, please refer to
IUCN SSC Red List Technical Working Group (2021).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>IUCN SSC Red List Technical Working Group (2021)
Mapping Standards and Data Quality for the IUCN Red List Spatial Data
(Version 1.19). International Union for Conservation of Nature (IUCN).
Available at <a href='https://nc.iucnredlist.org/redlist/resources/files/1539098236-Mapping_Standards_Version_1.16_2018.pdf'>https://nc.iucnredlist.org/redlist/resources/files/1539098236-Mapping_Standards_Version_1.16_2018.pdf</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='co'># \dontrun{</span></span>
<span class='r-in'><span class='co'># find file path for example range data following IUCN Red List data format</span></span>
<span class='r-in'><span class='co'>## N.B. the range data were not obtained from the IUCN Red List,</span></span>
<span class='r-in'><span class='co'>## and were instead based on data from GBIF (https://www.gbif.org/)</span></span>
<span class='r-in'><span class='va'>path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata"</span>, <span class='st'>"EXAMPLE_SPECIES.zip"</span>, package <span class='op'>=</span> <span class='st'>"aoh"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># import data</span></span>
<span class='r-in'><span class='va'>spp_range_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='read_spp_range_data.html'>read_spp_range_data</a></span><span class='op'>(</span><span class='va'>path</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># clean data</span></span>
<span class='r-in'><span class='va'>spp_cleaned_range_data</span> <span class='op'>&lt;-</span> <span class='fu'>clean_spp_range_data</span><span class='op'>(</span><span class='va'>spp_range_data</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># preview data</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>spp_range_data</span><span class='op'>)</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Simple feature collection with 4 features and 26 fields</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Geometry type: POLYGON</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Dimension:     XY</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Bounding box:  xmin: -9.479736 ymin: 36.59422 xmax: 3.302702 ymax: 43.76455</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 4 × 27</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   id_no binomial       presence origin seasonal compiler     yrcompiled citation</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>             <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>  <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>             <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>   </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>1</span>   979 Alytes dickhi…        1      1        1 Derived fro…         <span style='color: #BB0000;'>NA</span> <span style='color: #BB0000;'>NA</span>      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>2</span> <span style='text-decoration: underline;'>59</span>448 Calotriton as…        1      1        1 Derived fro…         <span style='color: #BB0000;'>NA</span> <span style='color: #BB0000;'>NA</span>      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>3</span>  <span style='text-decoration: underline;'>4</span>657 Chioglossa lu…        1      1        1 Derived fro…         <span style='color: #BB0000;'>NA</span> <span style='color: #BB0000;'>NA</span>      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>4</span> <span style='text-decoration: underline;'>58</span>622 Rana iberica          1      1        1 Derived fro…         <span style='color: #BB0000;'>NA</span> <span style='color: #BB0000;'>NA</span>      </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># … with 19 more variables: subspecies &lt;chr&gt;, subpop &lt;chr&gt;, source &lt;chr&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   island &lt;chr&gt;, tax_comm &lt;chr&gt;, dist_comm &lt;chr&gt;, generalisd &lt;int&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   legend &lt;chr&gt;, kingdom &lt;chr&gt;, phylum &lt;chr&gt;, class &lt;chr&gt;, order_ &lt;chr&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   family &lt;chr&gt;, genus &lt;chr&gt;, category &lt;chr&gt;, marine &lt;chr&gt;, terrestial &lt;chr&gt;,</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'>#   freshwater &lt;chr&gt;, geometry &lt;POLYGON [°]&gt;</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># plot data</span></span>
<span class='r-in'><span class='co'>## N.B. the cleaned data are very similar to the input data</span></span>
<span class='r-in'><span class='co'>## because they don't have any issues</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/pkg/terra/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>spp_cleaned_range_data</span><span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>plotting the first 10 out of 11 attributes; use max.plot = 11 to plot all</span>
<span class='r-plt'><img src='clean_spp_range_data-1.png' alt='' width='700' height='433' /></span>
<span class='r-in'><span class='co'># }</span></span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by <a href="http://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


