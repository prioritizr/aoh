<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Area of Habitat Data • aoh</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Create Area of Habitat Data">
<meta property="og:description" content="Generate Area of Habitat data for species distributions.
    Maps are produced following procedures outlined by Brooks et al. (2019)
    (&lt;doi:10.1016/j.tree.2019.06.009&gt;). They are derived using species'
    distribution data from the International Union for Conservation
    of Nature (IUCN) Red List of Threatened Species
    (&lt;https://www.iucnredlist.org/&gt;),
    habitat classification data from Jung et al. (2020)
    (&lt;doi:10.1038/s41597-020-00599-8&gt;), and elevation data from Amatulli et al.
    (2018) (&lt;doi:10.1038/sdata.2018.40&gt;).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">aoh</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.99999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/prioritizr/aoh/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="aoh-create-area-of-habitat-data" class="section level2">
<h2 class="hasAnchor">
<a href="#aoh-create-area-of-habitat-data" class="anchor" aria-hidden="true"></a>aoh: Create Area of Habitat Data</h2>

<div id="overview" class="section level3">
<h3 class="hasAnchor">
<a href="#overview" class="anchor" aria-hidden="true"></a>Overview</h3>
<p>Area of Habitat (AOH) maps aim to delineate the spatial distribution of suitable habitat for a species (<a href="https://doi.org/10.1016/j.tree.2019.06.009" class="external-link">Brooks <em>et al.</em> 2019</a>). They are used to help understand the impacts of habitat loss on species, and prioritize areas for conservation (e.g. <a href="https://doi.org/10.1111/cobi.12715" class="external-link">Tracewski <em>et al.</em> 2016</a>; <a href="https://doi.org/10.1111/j.1523-1739.2005.00204.x" class="external-link">Rondinini <em>et al.</em> 2005</a>). These maps are generally produced by obtaining geographic range data for a species, and then removing areas that do not contain suitable habitat or occur outside the known altitudinal limits for the species (<a href="https://doi.org/10.1016/j.tree.2019.06.009" class="external-link">Brooks <em>et al.</em> 2019</a>). To help make these maps accessible, the <em>aoh R</em> package provides routines for automatically creating Area of Habitat data based on the <a href="https://www.iucnredlist.org/" class="external-link">International Union for Conservation of Nature (IUCN) Red List of Threatened Species</a>. After manually downloading species range data from the <a href="https://www.iucnredlist.org/resources/spatial-data-download" class="external-link">IUCN Red List</a>, users can import them (using <code><a href="reference/read_spp_range_data.html">read_spp_range_data()</a></code>) and then use them to create Area of Habitat data (using <code><a href="reference/create_spp_aoh_data.html">create_spp_aoh_data()</a></code>). Global elevation and habitat classification data (<a href="https://doi.org/10.1038/sdata.2018.40" class="external-link">Amatulli <em>et al.</em> 2018</a>; <a href="https://doi.org/10.1038/s41597-020-00599-8" class="external-link">Jung <em>et al.</em> 2020</a>) are automatically downloaded, and data on species’ habitat preferences and altitudinal limits are obtained automatically using the <a href="https://apiv3.iucnredlist.org/" class="external-link">IUCN Red List API</a>. Since accessing the IUCN Red List requires a token, users may need to <a href="https://apiv3.iucnredlist.org/api/v3/token" class="external-link">obtain a token</a> and update their <em>R</em> configuration to recognize the token (see installation instructions below for details).</p>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor" aria-hidden="true"></a>Installation</h3>
<div id="package-installation" class="section level4">
<h4 class="hasAnchor">
<a href="#package-installation" class="anchor" aria-hidden="true"></a>Package installation</h4>
<p>The <a href="https://github.com/prioritizr/aoh" class="external-link">latest developmental version of the <em>aoh R</em> package</a> can be installed using the following <em>R</em> code. Please note that it requires the <a href="https://CRAN.R-project.org/package=sf" class="external-link"><em>sf</em></a>, <a href="https://CRAN.R-project.org/package=terra" class="external-link"><em>terra</em></a>, and <a href="https://CRAN.R-project.org/package=zen4R" class="external-link"><em>zen4R</em></a> <em>R</em> packages which may require additional software to be installed. If you encounter problems installing these dependencies, please consult their installation instructions.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"prioritizr/aoh"</span><span class="op">)</span></code></pre></div>
</div>
<div id="accessing-the-iucn-red-list-api" class="section level4">
<h4 class="hasAnchor">
<a href="#accessing-the-iucn-red-list-api" class="anchor" aria-hidden="true"></a>Accessing the IUCN Red List API</h4>
<p>After installing the <em>aoh R</em> package, you will need to obtain a token for the <a href="https://apiv3.iucnredlist.org/" class="external-link">IUCN Red List API</a> (if you do not have one already). To achieve this, please visit the IUCN website (see <a href="https://apiv3.iucnredlist.org/api/v3/token" class="external-link uri">https://apiv3.iucnredlist.org/api/v3/token</a>) and fill out the form to apply for a token. You should then receive a token shortly after completing the form (but not immediately). After receiving a token, please open the <code>.Renviron</code> file on your computer (e.g. using <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>). Next, please add the following text to the file (replacing the string with the token) and save the file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>IUCN_REDLIST_KEY<span class="ot">=</span><span class="st">"your_actual_token_not_this_string"</span></span></code></pre></div>
<p>Please restart your R session. You should now be able to access the IUCN Red List API. To verify this, please try running the following <em>R</em> code and – assuming everything works correctly – you should see the current version of the IUCN Red List:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># verify access to IUCN Red List API</span>
<span class="fu">rredlist</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/rredlist/reference/rl_version.html" class="external-link">rl_version</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>If these instructions did not work, please consult the documentation for the <a href="https://CRAN.R-project.org/package=rredlist" class="external-link"><em>rredlist</em></a> <em>R</em> package for further details.</p>
</div>
</div>
<div id="usage" class="section level3">
<h3 class="hasAnchor">
<a href="#usage" class="anchor" aria-hidden="true"></a>Usage</h3>
<p>Here we provide a short introduction to the <em>aoh R</em> package. In this example, we will generate Area of Habitat data for the following Iberian species: Pyrenean brook salamander (<em>Calotriton asper</em>), Iberian frog (<em>Rana iberica</em>), western spadefoot toad (<em>Pelobates cultripes</em>), and golden striped salamnader (<em>Chioglossa lusitanica</em>). To start off, we will load the package. We will also load the <a href="https://CRAN.R-project.org/package=rappdirs" class="external-link"><em>rappdirs</em></a> <em>R</em> package to cache data, and the <a href="https://CRAN.R-project.org/package=terra" class="external-link"><em>terra</em></a> and <a href="https://CRAN.R-project.org/package=ggplot2" class="external-link"><em>ggplot2</em></a> <em>R</em> packages to visualize results.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://prioritizr.github.io/aoh/" class="external-link">aoh</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rappdirs.r-lib.org" class="external-link">rappdirs</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></code></pre></div>
<p>Now we will import range data for the species. Although users would typically obtain range data from the <a href="https://www.iucnredlist.org/" class="external-link">International Union for Conservation of Nature (IUCN) Red List of Threatened Species</a>, here we will use built-in species range data that distributed with the package for convenience. <strong>Please note that these data were not obtained from the IUCN Red List, and were manually generated using occurrence records from the <a href="https://www.gbif.org/" class="external-link">Global Biodiversity Information Facility</a>.</strong></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># find file path for data</span>
<span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"EXAMPLE_SPECIES.zip"</span>, package <span class="op">=</span> <span class="st">"aoh"</span><span class="op">)</span>

<span class="co"># import data</span>
<span class="va">spp_range_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_spp_range_data.html">read_spp_range_data</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span>

<span class="co"># preview data</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">spp_range_data</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 4 features and 26 fields</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Geometry type: POLYGON</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Dimension:     XY</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Bounding box:  xmin: -9.479736 ymin: 36.59422 xmax: 3.302702 ymax: 43.76455</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Geodetic CRS:  WGS 84</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4 × 27</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   id_no binomial       presence origin seasonal compiler     yrcompiled citation</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;dbl&gt; &lt;chr&gt;             &lt;int&gt;  &lt;int&gt;    &lt;int&gt; &lt;chr&gt;             &lt;dbl&gt; &lt;chr&gt;   </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1   979 Alytes dickhi…        1      1        1 Derived fro…         NA &lt;NA&gt;    </span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 59448 Calotriton as…        1      1        1 Derived fro…         NA &lt;NA&gt;    </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  4657 Chioglossa lu…        1      1        1 Derived fro…         NA &lt;NA&gt;    </span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 58622 Rana iberica          1      1        1 Derived fro…         NA &lt;NA&gt;    </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="do">## # … with 19 more variables: subspecies &lt;chr&gt;, subpop &lt;chr&gt;, source &lt;chr&gt;,</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="do">## #   island &lt;chr&gt;, tax_comm &lt;chr&gt;, dist_comm &lt;chr&gt;, generalisd &lt;int&gt;,</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="do">## #   legend &lt;chr&gt;, kingdom &lt;chr&gt;, phylum &lt;chr&gt;, class &lt;chr&gt;, order_ &lt;chr&gt;,</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="do">## #   family &lt;chr&gt;, genus &lt;chr&gt;, category &lt;chr&gt;, marine &lt;chr&gt;, terrestial &lt;chr&gt;,</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="do">## #   freshwater &lt;chr&gt;, geometry &lt;POLYGON [°]&gt;</span></span></code></pre></div>
<p>Next, we will generate Area of Habitat data for the species. To achieve this, the package will (i) automatically download global elevation and habitat classification data (from <a href="https://doi.org/10.1038/sdata.2018.40" class="external-link">Amatulli <em>et al.</em> 2018</a>; <a href="https://doi.org/10.1038/s41597-020-00599-8" class="external-link">Jung <em>et al.</em> 2020</a>), (ii) automatically download information on the altitudinal limits and habitat preferences of the species from the IUCN Red List (per the taxon identifiers in the <code>id_no</code> column), and (iii) cross-reference this information to identify suitable habitat inside the geographic range of each species (following <a href="https://doi.org/10.1016/j.tree.2019.06.009" class="external-link">Brooks <em>et al.</em> 2019</a>). We also specify a folder to cache the downloaded datasets so that we won’t need to re-downloaded again during subsequent runs.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># specify cache directory</span>
<span class="va">cache_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rappdirs.r-lib.org/reference/user_data_dir.html" class="external-link">user_data_dir</a></span><span class="op">(</span><span class="st">"aoh"</span><span class="op">)</span>

<span class="co"># create cache_dir if needed</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">cache_dir</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">cache_dir</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span>

<span class="co"># specify folder to save Area of Habitat data</span>
<span class="co">## although we use a temporary directory here to avoid polluting your</span>
<span class="co">## with examples files, you would normally specify the folder</span>
<span class="co">## on your computer where you want to save data</span>
<span class="va">output_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># generate Area of Habitat data</span>
<span class="co">## note that this function might take a complete because it will need to</span>
<span class="co">## download the global habitat and elevation data that first time you run it.</span>
<span class="va">spp_aoh_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_spp_aoh_data.html">create_spp_aoh_data</a></span><span class="op">(</span>
  <span class="va">spp_range_data</span>, output_dir <span class="op">=</span> <span class="va">output_dir</span>, cache_dir <span class="op">=</span> <span class="va">cache_dir</span>
<span class="op">)</span></code></pre></div>
<p>While running the code, we see that it displayed a message telling us that certain habitat classes were not available (i.e. “5.18”, “7.1”, and “7.2”). <strong>This is fine. It is not an error.</strong> The reason we see this message is because although the global habitat dataset contains the majority of <a href="https://www.iucnredlist.org/resources/habitat-classification-scheme" class="external-link">IUCN habitat classes</a> for terrestrial environments, it does not contain every single IUCN habitat class (see <a href="https://doi.org/10.1038/s41597-020-00599-8" class="external-link">Jung <em>et al.</em> 2020</a> for details). Upon checking the <a href="https://www.iucnredlist.org/resources/habitat-classification-scheme" class="external-link">IUCN habitat classes</a>, we can see that these classes correspond to caves and other subterranean environments. Although failing to account for such habitats could potentially be an issue, here we will assume that accounting for the species’ non-subterranean habitats is sufficient to describe their spatial distribution (similar to <a href="https://doi.org/10.1111/ddi.12296" class="external-link">Ficetola <em>et al.</em> 2015</a>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># preview results</span>
<span class="co">## resulting dataset is a simple features (sf) object containing</span>
<span class="co">## spatial geometries for cleaned versions of the range data</span>
<span class="co">## (in the geometry column) and the following additional columns:</span>
<span class="co">##</span>
<span class="co">## - id_no            : IUCN Red List taxon identifier</span>
<span class="co">## - seasonal         : integer identifier for seasonal distributions</span>
<span class="co">## - full_habitat_code: All IUCN Red List codes for suitable habitat classes</span>
<span class="co">##                      (multiple codes are delimited using "|" symbols)</span>
<span class="co">## - habitat_code     : IUCN Red List codes for suitable habitat classes</span>
<span class="co">##                      used to create AOH maps</span>
<span class="co">## - elevation_lower  : lower limit for the species on IUCN Red List</span>
<span class="co">## - elevation_upper  : upper limit for the species on IUCN Red List</span>
<span class="co">## - xmin             : minimum x-coordinate for Area of Habitat data</span>
<span class="co">## - xmax             : maximum x-coordinate for Area of Habitat data</span>
<span class="co">## - ymin             : minimum y-coordinate for Area of Habitat data</span>
<span class="co">## - ymax             : maximum y-coordinate for Area of Habitat data</span>
<span class="co">## - path             : file path for Area of Habitat data (GeoTIFF format)</span>
<span class="co">##</span>
<span class="co">## since data obtained from the IUCN Red List cannot be redistributed,</span>
<span class="co">## we will not show all the columns in this object</span>
<span class="co">##</span>
<span class="co">## N.B. you can view all columns on your computer with: print(spp_aoh_data)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">spp_aoh_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id_no"</span>, <span class="st">"seasonal"</span>, <span class="st">"path"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Simple feature collection with 4 features and 3 fields</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Geometry type: POLYGON</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Dimension:     XY</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Bounding box:  xmin: -914690 ymin: 4364364 xmax: 318726 ymax: 5066793</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Projected CRS: World_Behrmann</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 4 × 4</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   id_no seasonal path                                                   geometry</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;dbl&gt;    &lt;int&gt; &lt;chr&gt;                                             &lt;POLYGON [m]&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  4657        1 /tmp/Rtmpb3hNyg/AOH_4657_1.tif  ((-855061 4559107, -854997 455…</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 58622        1 /tmp/Rtmpb3hNyg/AOH_58622_1.tif ((-849079 4613824, -835314 460…</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 59448        1 /tmp/Rtmpb3hNyg/AOH_59448_1.tif ((-244432 5022110, -248291 500…</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   979        1 /tmp/Rtmpb3hNyg/AOH_979_1.tif   ((-102404 4469056, -97966 4483…</span></span></code></pre></div>
<p>After generating the Area of Habitat data, we can import them.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># import the Area of Habitat data</span>
<span class="co">## since the data for each species have a different spatial extent</span>
<span class="co">## (to reduce file sizes), we will import each dataset separately in a list</span>
<span class="va">spp_aoh_rasters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">spp_aoh_data</span><span class="op">$</span><span class="va">path</span>, <span class="va">rast</span><span class="op">)</span>

<span class="co"># preview raster data</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">spp_aoh_rasters</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 516, 537, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 1000, 1000  (x, y)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : -915531, -378531, 4551769, 5067769  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : World_Behrmann </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : AOH_4657_1.tif </span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="do">## name        :     lyr.1 </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="do">## min value   :         0 </span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="do">## max value   : 0.1428571 </span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [[2]]</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 499, 752, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 1000, 1000  (x, y)</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : -904531, -152531, 4568769, 5067769  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : World_Behrmann </span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : AOH_58622_1.tif </span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="do">## name        :        lyr.1 </span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="do">## min value   : 0.0001428571 </span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="do">## max value   :        0.158 </span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [[3]]</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 228, 568, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 1000, 1000  (x, y)</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : -248531, 319469, 4837769, 5065769  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : World_Behrmann </span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : AOH_59448_1.tif </span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="do">## name        :     lyr.1 </span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="do">## min value   :         0 </span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="do">## max value   : 0.1785714 </span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="do">## [[4]]</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 260, 371, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 1000, 1000  (x, y)</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : -468531, -97531, 4363769, 4623769  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : World_Behrmann </span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : AOH_979_1.tif </span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a><span class="do">## name        :     lyr.1 </span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="do">## min value   :         0 </span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a><span class="do">## max value   : 0.1307143</span></span></code></pre></div>
<p>Finally, let’s create some maps to compare the range data with the Area of habitat data. Although we could create these maps manually (e.g. using the <a href="https://CRAN.R-project.org/package=rappdirs" class="external-link"><em>ggplot2</em></a> <em>R</em> package), we will use a plotting function distributed with the <em>aoh R</em> package for convenience.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create maps</span>
<span class="va">map</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/plot_spp_aoh_data.html">plot_spp_aoh_data</a></span><span class="op">(</span><span class="va">spp_aoh_data</span>, zoom <span class="op">=</span> <span class="fl">6</span>, maptype <span class="op">=</span> <span class="st">"toner-background"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"range"</span> <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_size_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"range"</span> <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>
    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,
    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,
    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span>,
    strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"black"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span>
  <span class="op">)</span>

<span class="co"># display maps</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">map</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="90%" style="display: block; margin: auto;"></p>
</div>
<div id="citation" class="section level3">
<h3 class="hasAnchor">
<a href="#citation" class="anchor" aria-hidden="true"></a>Citation</h3>
<p>Please cite the <em>aoh R</em> package and the underlying datasets used to produce Area of Habitat data.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>To cite the aoh package and the underlying datasets used to create the</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>Area of Habitat data, please use<span class="sc">:</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  Hanson <span class="fu">JO</span> (<span class="dv">2021</span>) aoh<span class="sc">:</span> Create Area of Habitat Data. R package version</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="dv">0</span>.<span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">99999.</span> Available at https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>jeffreyhanson<span class="sc">/</span>aoh.</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  IUCN [insert year]. IUCN Red List of Threatened Species. Version</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  [insert version]. Available at www.iucnredlist.org.</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  Amatulli G, Domisch S, Tuanmu M<span class="sc">-</span>N, Parmentier B, Ranipeta A, Malczyk</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  J, and Jetz <span class="fu">W</span> (<span class="dv">2018</span>) A suite of global, cross<span class="sc">-</span>scale topographic</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  variables <span class="cf">for</span> environmental and biodiversity modeling. Scientific</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  Data, <span class="dv">5</span><span class="sc">:</span><span class="fl">180040.</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  Jung M, Dahal PR, Butchart SHM, Donald PF, De Lamo X, Lesiv M, Kapos</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  V, Rondinini C, and Visconti <span class="fu">P</span> (2020a) A global map of terrestrial</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  habitat types. Scientific data, <span class="dv">7</span><span class="sc">:</span><span class="dv">1</span><span class="sc">--</span><span class="fl">8.</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  Jung M, Dahal PR, Butchart SHM, Donald PF, De Lamo X, Lesiv M, Kapos</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  V, Rondinini C, and Visconti <span class="fu">P</span> (2020b) A global map of terrestrial</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  habitat <span class="fu">types</span> (insert version) [Data set]. Zenodo. Available at</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  https<span class="sc">:</span><span class="er">//</span>doi.org<span class="sc">/</span><span class="fl">10.5281</span><span class="sc">/</span>zenodo.<span class="fl">4058819.</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>To see these entries <span class="cf">in</span> BibTeX format, use <span class="st">'print(&lt;citation&gt;,</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="st">bibtex=TRUE)'</span>, <span class="st">'toBibtex(.)'</span>, or set</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="st">'options(citation.bibtex.max=999)'</span>.</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/prioritizr/aoh/">https://​github.com/​prioritizr/​aoh/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/prioritizr/aoh/issues">https://​github.com/​prioritizr/​aoh/​issues</a>
</li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing aoh</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://jeffrey-hanson.com">Jeffrey O Hanson</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-4716-6134" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/Lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://github.com/prioritizr/aoh/actions" class="external-link"><img src="https://img.shields.io/github/workflow/status/prioritizr/aoh/Ubuntu/master.svg?label=Ubuntu" alt="R-CMD-check-Ubuntu"></a></li>
<li><a href="https://github.com/prioritizr/aoh/actions" class="external-link"><img src="https://img.shields.io/github/workflow/status/prioritizr/aoh/Windows/master.svg?label=Windows" alt="R-CMD-check-Windows"></a></li>
<li><a href="https://github.com/prioritizr/aoh/actions" class="external-link"><img src="https://img.shields.io/github/workflow/status/prioritizr/aoh/Mac%20OSX/master.svg?label=Mac%20OSX" alt="R-CMD-check-Mac-OSX"></a></li>
<li><a href="https://codecov.io/github/prioritizr/aoh?branch=master" class="external-link"><img src="https://codecov.io/github/prioritizr/aoh/coverage.svg?branch=master" alt="Coverage Status"></a></li>
<li><a href="https://CRAN.R-project.org/package=aoh" class="external-link"><img src="http://www.r-pkg.org/badges/version/aoh" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
